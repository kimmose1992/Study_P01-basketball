<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<th:block th:replace="fragments/cm/header :: fragment-header" />
	<script type="text/javascript">
	
		$(document).ready(function(){	
			fn_defineForm();
			$("#searchBtn").click(function(){
				var params = $("#searchForm").serializeObject();
				
				com.movePagePost("/nm/bookList", params);
			});
		});
		
		function bookDetail(cmntyNo){
			var params = {};
			params.cmntyNo = cmntyNo;
			com.movePagePost("/nm/bookDetail", params);
		}
		
		function textRegist(){
			var params = {};
			params.editDivCd = "I"; // I 등록 U 수정
			com.movePagePost("/nm/bookEdit", params);
		}
		
		function fn_defineForm() {
			fn_makeCombo();
		};
		
		function fn_makeCombo() {
			var codeParams = [];
			codeParams.push({"codeKey":"SD0001", "comboId":"searchType", "comboType":"A"});
			
			com.makeCombo(codeParams);
		};
	</script>
</head>
<body>
	<!-- asideMenu -->
	<div th:replace="fragments/cm/layout/asideMenu :: fragment-asideMenu"></div>
	
	<!-- header -->
	<div th:replace="fragments/cm/layout/headerMenu :: fragment-headerMenu"></div>
      
	<div id="wrap">
		<div id="section_wrap">
			<!-- Worship Visual -->
			<section class="worship_visual">
            	<div th:replace="fragments/cm/layout/worshipVisual :: fragment-worshipVisual"></div>
			</section>
			
			<section class="community_list_wrap">
			
			<!-- Search -->
			<div class="search_wrap" th:object="${returnSVO.nmBookDVO}">
				<div class="community_list_title">
                    <p>새가족</p>
                    <h2>교재</h2>
                </div>     
                <form id="searchForm" >
					<table>
						<tbody>
							<tr>
								<td class="search_division">제목</td>
								<td class="search_inputbox">
									<input type="text" id="title" name="title" th:value="*{title}"/>
								</td>
							</tr>
						</tbody>
					</table>
				</form>
				<div class="search_btn">
					<div class="search_btn_wrap">
						<input type="button" class="Btn" value="초기화"/>
						<input type="button" class="Btn" value="조회" id="searchBtn"/>
					</div>
				</div>
			</div>
				<!-- Search --> 
				 
				<!-- List -->
				<div class="community_list_table_wrap">
					<table class="community_list_table">
						<thead>
							<tr>
								<th>번호</th>
			                    <th>제목</th>
			                    <th>등록일</th>
			                    <th>조회수</th>
			                    <th>첨부파일</th>
							</tr>
						</thead>
						<tbody>
							<tr th:onclick = "bookDetail([[${nmBookDVO.cmntyNo}]]);"  th:if="${not #lists.isEmpty(returnSVO.nmBookDVOList)}" th:each="nmBookDVO : ${returnSVO.nmBookDVOList}">
								<td th:text="${nmBookDVO.cmntyNo}" id="cmntyNo"></td>
								<td th:text="${nmBookDVO.title}" id="title"></td>
								<td th:text="${#temporals.format(nmBookDVO.frsRegDt,'yyyy-MM-dd')}" style='text-align:center'></td>
								<td th:text="${nmBookDVO.viewCnt}"></td>
									
								<p th:if="${nmBookDVO.fileNo == 0}"><td th:text="N"></td></p>
								<p th:unless="${nmBookDVO.fileNo == 0}"><td th:text="Y"></td></p>
								</tr>
						</tbody>
					</table>
					<div class="community_list_table_btn_wrap">
						<div class="community_list_table_btn">
							<button type="button" id="registBtn" value="글등록" th:text="|글등록|" class="Btn" th:onclick="textRegist()"></button>
						</div>
					</div>
				</div>
			</section>
			
			<!-- Paging -->
			<div th:replace="fragments/cm/pagination :: fragment-pagination" id="pagination"></div>
			
			<!-- footer -->
			<div th:replace="fragments/cm/layout/footer :: fragment-footer"></div>
		</div>
	</div>
</body>
</html>