<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ps.intro">
	
	<!-- 셀라소개 기본정보 조회 -->
	<select id="selectSelahInfo" parameterType="PsIntroDVO" resultType="PsIntroDVO">
	<![CDATA[
			SELECT A.INTRO_NO		/* 소개번호 */
				 , A.INTRO_DIV_CD	/* 소개구분코드 */
				 , A.SUBJECT		/* 주제 */
				 , A.TITLE			/* 제목 */
				 , A.CONTENT		/* 내용 */
				 , A.REMARK			/* 비고 */
				 , A.FRS_REG_NO		/* 최초등록자번호 */
				 , A.FRS_REG_DT		/* 최초등록일시 */
				 , A.LST_MDF_NO		/* 최종수정자번호 */
				 , A.LST_MDF_DT		/* 최종수정일시 */
				 , B.FILE_NO		/* 파일번호 */
			  FROM TB_INTRO A
   LEFT OUTER JOIN TB_FILE B
   				ON A.INTRO_NO = B.REF_NO
   			   AND A.INTRO_DIV_CD = B.REF_DIV_CD
   			   AND B.REF_TB_KEY = #{slyouthTbKey}
		 	 WHERE A.INTRO_DIV_CD = 'SLI'
	]]>
	</select>
	
	<!-- 셀라소개 수정이력 업데이트 -->
	<update id="updateIntroInfo" parameterType="PsIntroDVO">
	<![CDATA[
	UPDATE TB_INTRO
	   SET LST_MDF_NO = LST_MDF_NO
	     , LST_MDF_DT = NOW()
	 WHERE INTRO_DIV_CD = #{introDivCd}   
	]]>
	</update>	
</mapper>