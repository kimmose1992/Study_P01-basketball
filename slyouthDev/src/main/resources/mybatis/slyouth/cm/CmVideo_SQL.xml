<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cm.video">

	<!-- 영상데이터 삽입 -->
	<insert id="insertVideo" parameterType="CmVideoDVO">
	<![CDATA[
		INSERT 
		  INTO TB_VIDEO
			   (	
				VIDEO_DIV_CD 	/* 영상구분코드 */
			  ,	VIDEO_TYPE_CD	/* 영상타입코드 */
			  ,	TITLE			/* 제목 */
			  ,	CONTENT			/* 내용 */
			  ,	REMARK			/* 비고 */
			  ,	YTB_ADR			/* 유튜브 주소 */
			  ,	YTB_THUMB_ADR	/* 유튜브 썸네일 주소 */
			  ,	FRS_REG_NO		/* 최초등록자번호 */
			  ,	LST_MDF_NO		/* 최종수정자번호 */
			   )
		VALUES (
				#{videoDivCd}
			  , #{videoTypeCd}
			  , #{title}
			  , #{content}
			  , #{remark}
			  , #{ytbAdr}
			  , #{ytbThumbAdr}
			  , #{frsRegNo}
			  , #{lstMdfNo}
			   )
	]]>
	</insert>
	
	<!-- 영상데이터 수정 -->
	<update id="updateVideo" parameterType="CmVideoDVO">
	<![CDATA[
		UPDATE TB_VIDEO
		   SET TITLE = #{title}
		   	 , CONTENT = #{content}
		   	 , REMARK = #{remark}
		   	 , YTB_ADR = #{ytbAdr}
		   	 , YTB_THUMB_ADR = #{ytbThumbAdr}
		   	 , LST_MDF_NO = #{lstMdfNo}
		   	 , LST_MDF_DT = NOW()
		 WHERE VIDEO_DIV_CD = #{videoDivCd}
		   AND VIDEO_NO = #{videoNo}
	]]>
	</update>
	
	<!-- 영상데이터 삭제 -->
	<delete id="deleteVideo" parameterType="CmVideoDVO">
	<![CDATA[
		DELETE 
		  FROM TB_VIDEO
		 WHERE VIDEO_DIV_CD = #{videoDivCd}
		   AND VIDEO_NO = #{videoNo};
	]]>
	</delete>
	
	<!-- 영상 정보 조회 -->
	<select id="selectVideo" parameterType="CmVideoDVO" resultType="CmVideoDVO">
	<![CDATA[
		SELECT VIDEO_NO				/* 영상일련번호 */
			 , VIDEO_DIV_CD			/* 영상구분코드 */
			 , VIDEO_TYPE_CD		/* 영상타입코드 */
			 , TITLE				/* 제목 */
			 , CONTENT				/* 내용 */
			 , REMARK				/* 비고 */
			 , YTB_ADR				/* 유투브링크 */
			 , YTB_THUMB_ADR		/* 유투브 썸네일 */
			 , FRS_REG_NO			/* 최초등록자 */
			 , FRS_REG_DT			/* 최종등록일자 */
			 , LST_MDF_NO			/* 최종수정자 */
			 , LST_MDF_DT			/* 최종수정일자 */
		  FROM TB_VIDEO
		 WHERE VIDEO_NO = #{videoNo} 
	]]>
	</select>
	
	<!-- 영상 리스트 조회 -->
	<select id="selectVideoList" parameterType="CmVideoDVO" resultType="CmVideoDVO">
	<![CDATA[
		SELECT VIDEO_NO				/* 영상일련번호 */
			 , VIDEO_DIV_CD			/* 영상구분코드 */
			 , VIDEO_TYPE_CD		/* 영상타입코드 */
			 , TITLE				/* 제목 */
			 , CONTENT				/* 내용 */
			 , REMARK				/* 비고 */
			 , YTB_ADR				/* 유투브링크 */
			 , YTB_THUMB_ADR		/* 유투브 썸네일 */
			 , FRS_REG_NO			/* 최초등록자 */
			 , FRS_REG_DT			/* 최종등록일자 */
			 , LST_MDF_NO			/* 최종수정자 */
			 , LST_MDF_DT			/* 최종수정일자 */
		  FROM TB_VIDEO
		 WHERE VIDEO_DIV_CD = #{videoDivCd} 
	  ORDER BY VIDEO_NO DESC
	]]>
	</select>
</mapper>